<p>stellar-core is at the bottom of the Stellar stack, many other services can be
built on top of it.</p>
<p>Example of such services include Horizon, a modular service to assist with
submitting transactions to the network as well as exposing a data model to
query ledger history.</p>
<h1 id="integration-points"><a class="anchorShortcut" href="#integration-points" aria-hidden="true"></a> Integration points</h1>
<h2 id="data-consumers"><a class="anchorShortcut" href="#data-consumers" aria-hidden="true"></a> Data consumers</h2>
<p>Many types of services can be built based on the data generated by stellar-core.</p>
<p>stellar-core generates two types of data that can be queried by applications.</p>
<p>Unless otherwise noted, data stored is <code>validated</code>, ie data is only persisted
after consensus is reached on the network.</p>
<p>An overview of how the data flows within stellar-core is <a href="software/core-data-flow.pdf">this data flow presentation</a></p>
<h3 id="sql-tables"><a class="anchorShortcut" href="#sql-tables" aria-hidden="true"></a> SQL tables</h3>
<p>This includes near real time version of the changes that occured in the network
as well as the current state of the ledger.
Applications can safely perform READ ONLY transactions on the data located there.
The schema is described in <a href="db-schema.md"><code>db-schema.md</code></a></p>
<p><strong>Important</strong>: when consuming data from SQL, be sure that your service is
properly registered by updating its cursor so that stellar-core can safely
garbage collect data no longer needed.
By default stellar-core only keeps track of its internal state and will
therefore delete data it does not need anymore.
See <code>setcursor</code> in <a href="software/commands.md#http-commands"><code>software/commands.md#http-commands</code></a></p>
<p>Advantages of consuming SQL tables for a dependent service:</p>
<ul>
<li>data is available as soon as the network closes a ledger.</li>
<li>additional meta data not available in history is produced by stellar-core.</li>
<li>allows to efficiently perform filtering (audit certain users or
transaction types).</li>
</ul>
<h3 id="history-archives"><a class="anchorShortcut" href="#history-archives" aria-hidden="true"></a> History archives</h3>
<p>Services can also process the flat files uploaded periodically to the
archive stores.
Advantages of building on top of history archives over SQL tables include:</p>
<ul>
<li>allows to build an aggregate view going back to arbitrary points in time.</li>
<li>does not depend on running stellar-core (can be built as a pure client
application or within a foreign stack). The only thing needed is the XDR
deserialization code and code to fetch data from the archive.</li>
</ul>
<p>See <a href="history.md"><code>history.md</code></a> for more detail.</p>
<h3 id="stellar-core-database"><a class="anchorShortcut" href="#stellar-core-database" aria-hidden="true"></a> Stellar core database</h3>
<h2 id="api-to-stellar-core"><a class="anchorShortcut" href="#api-to-stellar-core" aria-hidden="true"></a> API to stellar-core</h2>
<p>stellar-core exposes a simple HTTP based API for performing various
types of operations on stellar-core itself or on entities in the network
(such as submitting transactions).
See <a href="software/commands.md"><code>software/commands.md</code></a> for more information.</p>
