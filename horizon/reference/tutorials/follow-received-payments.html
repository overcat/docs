<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!--

  Want to contribute to this site? Take a look at the GitHub repository for this
  site: https://github.com/stellar/developers

  -->
  <title>Follow Received Payments - Go SDK | Stellar Developers</title>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <meta name="author" content="Stellar.org and contributors">

  <meta property="og:title" content="Follow Received Payments - Go SDK | Stellar Developers">
  <meta property="og:type" content="website">


  <link rel="stylesheet" href="/styles/index-cff14d28bafbba60930f31b923b4e75b.css">

  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/rocket-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/rocket-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/rocket-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicon/rocket-96x96.png" sizes="96x96">
  <meta name="msapplication-TileImage" content="/images/favicon/rocket-144x144.png">

  <script type="text/javascript">
    var $mcGoal = {'settings':{'uuid':'c001d97369b7a10d224c23867','dc':'us9'}};
    (function() {
      var sp = document.createElement('script'); sp.type = 'text/javascript'; sp.async = true; sp.defer = true;
      sp.src = ('https:' == document.location.protocol ? 'https://s3.amazonaws.com/downloads.mailchimp.com' : 'http://downloads.mailchimp.com') + '/js/goal.min.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sp, s);
    })();
  </script>

  <script>window.clientData = {};</script>

  <script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName("script")[0];
  a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0065/1320.js?"+Math.floor(new Date().getTime()/3600000);
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
</head>
<body>
<div class="header2016">
  <div class="header2016__logo header2016__logo--spaced">
    <div class="so-siteHeader">
      <span class="so-logo">
  <a href="https://www.stellar.org/" class="so-logo__main">Stellar</a><!--
  --><span class="so-logo__separator"> </span><!--
  --><a href="/" class="so-logo__subSite">developers</a>
</span>
    </div>
  </div>
  <nav class="header2016__nav mainNavMenu spu-padStart-30">
    <a class="mainNavMenu__item " href="/guides/">&#x6307;&#x5357;</a>
<a class="mainNavMenu__item is-currentItem" href="/reference/">API &#x53C2;&#x8003;&#x624B;&#x518C;</a>
<a class="mainNavMenu__item " href="/software/">&#x8F6F;&#x4EF6;</a>
<a class="mainNavMenu__item " href="/tools/">&#x5DE5;&#x5177;</a>
  </nav>
</div>

<div class="S-flex-row">
  <div class="siteSidebar pageNavListBounder">
  <div class="mainSidebar">
    <ul class="pageNavList">


      <li class="pageNavList__subList collapsibleListSet js-collapsibleListSet">
        <span class="pageNavList__title collapsibleListSet__label js-collapsibleListSet__label">REST API</span>
        <ul class="collapsibleListSet__list js-collapsibleListSet__list is-collapsed">
                    <li class="pageNavList__item"><a href="/horizon/reference/index.html">Overview</a></li>
          <li class="pageNavList__item"><a href="/horizon/reference/errors.html">Errors</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/paging.html">Paging</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/rate-limiting.html">Rate Limiting</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/responses.html">Response Format</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/streaming.html">Streaming</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/xdr.html">XDR</a></li>
        
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Tutorials</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item is-currentItem"><a href="/horizon/reference/tutorials/follow-received-payments.html">Follow Received Payments</a></li>

        </ul>
      </li>
            
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Endpoints</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/horizon/reference/endpoints/accounts-single.html">Account Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/assets-all.html">All Assets</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/data-for-account.html">Data for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-all.html">All Effects</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-account.html">Effects for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-ledger.html">Effects for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-operation.html">Effects for Operation</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-transaction.html">Effects for Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/ledgers-all.html">All Ledgers</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/ledgers-single.html">Ledger Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/metrics.html">Metrics</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/offers-for-account.html">Offers for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-all.html">All Operations</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-for-account.html">Operations for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-for-ledger.html">Operations for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-for-transaction.html">Operations for Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-single.html">Operation Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/orderbook-details.html">Orderbook Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/path-finding.html">Find Payment Paths</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-all.html">All Payments</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-for-account.html">Payments for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-for-ledger.html">Payments for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-for-transaction.html">Payments for Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/trade_aggregations.html">Trade Aggregations</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/trades-for-account.html">Trades for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/trades-for-offer.html">Trades for Offer</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/trades.html">Trades</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-all.html">All Transactions</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-create.html">Post Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-for-account.html">Transactions for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-for-ledger.html">Transactions for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-single.html">Transaction Details</a></li>

        </ul>
      </li>
            
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Resources</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/horizon/reference/resources/account.html">Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/asset.html">Asset</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/data.html">Data</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/effect.html">Effect</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/ledger.html">Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/offer.html">Offer</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/operation.html">Operation</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/orderbook.html">Orderbook</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/page.html">Page</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/path.html">Payment Path</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/trade.html">Trade</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/trade_aggregation.html">Trade Aggregation</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/transaction.html">Transaction</a></li>

        </ul>
      </li>
            
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Errors</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/horizon/reference/errors/bad-request.html">Bad Request</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/before-history.html">Before History</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/forbidden.html">Forbidden</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/not-acceptable.html">Not Acceptable</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/not-found.html">Not Found</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/not-implemented.html">Not Implemented</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/rate-limit-exceeded.html">Rate Limit Exceeded</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/server-error.html">Internal Server Error</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/stale-history.html">Stale History</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/timeout.html">Timeout</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/transaction-failed.html">Transaction Failed</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/transaction-malformed.html">Transaction Malformed</a></li>

        </ul>
      </li>
    
        </ul>
      </li>
    

      <li class="pageNavList__subList collapsibleListSet js-collapsibleListSet">
        <span class="pageNavList__title collapsibleListSet__label js-collapsibleListSet__label">JavaScript SDK</span>
        <ul class="collapsibleListSet__list js-collapsibleListSet__list is-collapsed">
                    <li class="pageNavList__item"><a href="/js-stellar-sdk/reference/index.html">Overview</a></li>
          <li class="pageNavList__item"><a href="/js-stellar-base/reference/base-examples.html">Transaction Examples</a></li>
  <li class="pageNavList__item"><a href="/js-stellar-base/reference/building-transactions.html">Building Transactions</a></li>
          <li class="pageNavList__item"><a href="/js-stellar-sdk/reference/examples.html">Basic Examples</a></li>
        <li class="pageNavList__item"><a href="https://stellar.github.io/js-stellar-sdk/" target="_blank" rel="noopener noreferrer">API Reference <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>

        </ul>
      </li>
    

      <li class="pageNavList__subList collapsibleListSet js-collapsibleListSet">
        <span class="pageNavList__title collapsibleListSet__label js-collapsibleListSet__label">Go SDK</span>
        <ul class="collapsibleListSet__list js-collapsibleListSet__list is-collapsed">
                    <li class="pageNavList__item"><a href="/go/reference/index.html">Overview</a></li>
          <li class="pageNavList__item"><a href="/go/reference/examples.html">Basic Examples</a></li>
        <li class="pageNavList__item"><a href="https://godoc.org/github.com/stellar/go" target="_blank">Godoc <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>

        </ul>
      </li>
    

      <li class="pageNavList__item"><a href="https://github.com/stellar/java-stellar-sdk" target="_blank" rel="noopener noreferrer">Java SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>
      <li class="pageNavList__item"><a href="https://github.com/stellar/ruby-stellar-sdk" target="_blank" rel="noopener noreferrer">Ruby SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>
      <li class="pageNavList__item"><a href="https://github.com/StellarCN/py-stellar-base" target="_blank" rel="noopener noreferrer">Python SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>
      <li class="pageNavList__item"><a href="https://github.com/QuantozTechnology/csharp-stellar-base" target="_blank" rel="noopener noreferrer">C# SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>

    </ul>
  </div>
</div>
  <div class="S-flexItem-share">
  <div class="spu-padSE-30">
    <h1 class="mainSectionTitle">
      Follow Received Payments
      &#xA0;<span class="spu-color-neutral6">[Go SDK]</span>
    </h1>
  </div>
  <div class="S-flex-rowWrap spu-borderTop-1 spu-borderColor-neutral7">
    <s-read-md class="S-flexItem-share mainContent s-read-md--capped spu-padSE-30 spu-padTB-20 documentRead" link-process-md="">
      <p>This tutorial shows how easy it is to use Horizon to watch for incoming payments on an <a href="../../reference/resources/account.html">account</a>
using JavaScript and <code>EventSource</code>.  We will eschew using <a href="https://github.com/stellar/js-stellar-sdk"><code>js-stellar-sdk</code></a>, the
high-level helper library, to show that it is possible for you to perform this
task on your own, with whatever programming language you would like to use.</p>
<p>This tutorial assumes that you:</p>
<ul>
<li>Have node.js installed locally on your machine.</li>
<li>Have curl installed locally on your machine.</li>
<li>Are running on Linux, OS X, or any other system that has access to a bash-like
shell.</li>
<li>Are familiar with launching and running commands in a terminal.</li>
</ul>
<p>In this tutorial we will learn:</p>
<ul>
<li>How to create a new account.</li>
<li>How to fund your account using friendbot.</li>
<li>How to follow payments to your account using curl and EventSource.</li>
</ul>
<h2 id="project-skeleton"><a class="anchorShortcut" href="#project-skeleton" aria-hidden="true"></a> Project Skeleton</h2>
<p>Let&#x2019;s get started by building our project skeleton:</p>
<pre><code class="language-bash">$ mkdir follow_tutorial
$ cd follow_tutorial
$ npm install --save stellar-base
$ npm install --save eventsource
</code></pre>
<p>This should have created a <code>package.json</code> in the <code>follow_tutorial</code> directory.
You can check that everything went well by running the following command:</p>
<pre><code class="language-bash">$ node -e &quot;require(&apos;stellar-base&apos;)&quot;
</code></pre>
<p>Everything was successful if no output it generated from the above command.  Now
let&#x2019;s write a script to create a new account.</p>
<h2 id="creating-an-account"><a class="anchorShortcut" href="#creating-an-account" aria-hidden="true"></a> Creating an account</h2>
<p>Create a new file named <code>make_account.js</code> and paste the following text into it:</p>
<pre><code class="language-javascript">var Keypair = require(&quot;stellar-base&quot;).Keypair;

var newAccount = Keypair.random();

console.log(&quot;New key pair created!&quot;);
console.log(&quot;  Account ID: &quot; + newAccount.publicKey());
console.log(&quot;  Secret: &quot; + newAccount.secret());
</code></pre>
<p>Save the file and run it:</p>
<pre><code class="language-bash">$ node make_account.js
New key pair created!
  Account ID: GB7JFK56QXQ4DVJRNPDBXABNG3IVKIXWWJJRJICHRU22Z5R5PI65GAK3
  Secret: SCU36VV2OYTUMDSSU4EIVX4UUHY3XC7N44VL4IJ26IOG6HVNC7DY5UJO
$
</code></pre>
<p>Before our account can do anything it must be funded.  Indeed, before an account
is funded it does not truly exist!</p>
<h2 id="funding-your-account"><a class="anchorShortcut" href="#funding-your-account" aria-hidden="true"></a> Funding your account</h2>
<p>The Stellar test network provides the Friendbot, a tool that developers
can use to get testnet lumens for testing purposes. To fund your account, simply
execute the following curl command:</p>
<pre><code class="language-bash">$ curl &quot;https://friendbot.stellar.org/?addr=GB7JFK56QXQ4DVJRNPDBXABNG3IVKIXWWJJRJICHRU22Z5R5PI65GAK3&quot;
</code></pre>
<p>Don&#x2019;t forget to replace the account id above with your own.  If the request
succeeds, you should see a response like:</p>
<pre><code class="language-json">{
  &quot;hash&quot;: &quot;ed9e96e136915103f5d8978cbb2036628e811f2c59c4c3d88534444cf504e360&quot;,
  &quot;result&quot;: &quot;received&quot;,
  &quot;submission_result&quot;: &quot;000000000000000a0000000000000001000000000000000000000000&quot;
}
</code></pre>
<p>After a few seconds, the Stellar network will perform consensus, close the
ledger, and your account will have been created.  Next up we will write a command
that watches for new payments to your account and outputs a message to the
terminal.</p>
<h2 id="following-payments-using"><a class="anchorShortcut" href="#following-payments-using" aria-hidden="true"></a> Following payments using <code>curl</code></h2>
<p>To follow new payments connected to your account you simply need to send <code>Accept: text/event-stream</code> header to the <a href="../../reference/payments-all.html">/payments</a> endpoint.</p>
<pre><code class="language-bash">$ curl -H &quot;Accept: text/event-stream&quot; &quot;https://horizon-testnet.stellar.org/accounts/GB7JFK56QXQ4DVJRNPDBXABNG3IVKIXWWJJRJICHRU22Z5R5PI65GAK3/payments&quot;
</code></pre>
<p>As a result you will see something like:</p>
<pre><code class="language-bash">retry: 1000
event: open
data: &quot;hello&quot;

id: 713226564145153
data: {&quot;_links&quot;:{&quot;effects&quot;:{&quot;href&quot;:&quot;/operations/713226564145153/effects/{?cursor,limit,order}&quot;,&quot;templated&quot;:true},
       &quot;precedes&quot;:{&quot;href&quot;:&quot;/operations?cursor=713226564145153\u0026order=asc&quot;},
       &quot;self&quot;:{&quot;href&quot;:&quot;/operations/713226564145153&quot;},
       &quot;succeeds&quot;:{&quot;href&quot;:&quot;/operations?cursor=713226564145153\u0026order=desc&quot;},
       &quot;transactions&quot;:{&quot;href&quot;:&quot;/transactions/713226564145152&quot;}},
       &quot;account&quot;:&quot;GB7JFK56QXQ4DVJRNPDBXABNG3IVKIXWWJJRJICHRU22Z5R5PI65GAK3&quot;,
       &quot;funder&quot;:&quot;GBS43BF24ENNS3KPACUZVKK2VYPOZVBQO2CISGZ777RYGOPYC2FT6S3K&quot;,
       &quot;id&quot;:713226564145153,
       &quot;paging_token&quot;:&quot;713226564145153&quot;,
       &quot;starting_balance&quot;:&quot;10000&quot;,
       &quot;type_i&quot;:0,
       &quot;type&quot;:&quot;create_account&quot;}
</code></pre>
<p>Every time you receive a new payment you will get a new row of data. Payments is not the only endpoint that supports streaming. You can also stream transactions <a href="../../reference/transactions-all.html">/transactions</a> and operations <a href="../../reference/operations-all.html">/operations</a>.</p>
<h2 id="following-payments-using-2"><a class="anchorShortcut" href="#following-payments-using-2" aria-hidden="true"></a> Following payments using <code>EventStream</code></h2>
<blockquote>
<p><strong>Warning!</strong> <code>EventSource</code> object does not reconnect for certain error types so it can stop working.
If you need a reliable streaming connection please use our <a href="https://github.com/stellar/js-stellar-sdk">SDK</a>.</p>
</blockquote>
<p>Another way to follow payments is writing a simple JS script that will stream payments and print them to console. Create <code>stream_payments.js</code> file and paste the following code into it:</p>
<pre><code class="language-js">var EventSource = require(&apos;eventsource&apos;);
var es = new EventSource(&apos;https://horizon-testnet.stellar.org/accounts/GB7JFK56QXQ4DVJRNPDBXABNG3IVKIXWWJJRJICHRU22Z5R5PI65GAK3/payments&apos;);
es.onmessage = function(message) {
	var result = message.data ? JSON.parse(message.data) : message;
	console.log(&apos;New payment:&apos;);
	console.log(result);
};
es.onerror = function(error) {
	console.log(&apos;An error occured!&apos;);
}
</code></pre>
<p>Now, run our script: <code>node stream_payments.js</code>. You should see following output:</p>
<pre><code class="language-bash">New payment:
{ _links:
   { effects:
      { href: &apos;/operations/713226564145153/effects/{?cursor,limit,order}&apos;,
        templated: true },
     precedes: { href: &apos;/operations?cursor=713226564145153&amp;order=asc&apos; },
     self: { href: &apos;/operations/713226564145153&apos; },
     succeeds: { href: &apos;/operations?cursor=713226564145153&amp;order=desc&apos; },
     transactions: { href: &apos;/transactions/713226564145152&apos; } },
  account: &apos;GB7JFK56QXQ4DVJRNPDBXABNG3IVKIXWWJJRJICHRU22Z5R5PI65GAK3&apos;,
  funder: &apos;GBS43BF24ENNS3KPACUZVKK2VYPOZVBQO2CISGZ777RYGOPYC2FT6S3K&apos;,
  id: 713226564145153,
  paging_token: &apos;713226564145153&apos;,
  starting_balance: &apos;10000&apos;,
  type_i: 0,
  type: &apos;create_account&apos; }
</code></pre>
<h2 id="testing-it-out"><a class="anchorShortcut" href="#testing-it-out" aria-hidden="true"></a> Testing it out</h2>
<p>We now know how to get a stream of transactions to an account. Let&#x2019;s check if our solution actually works and if new payments appear. Let&#x2019;s watch as we send a payment (<a href="https://github.com/stellar/go/blob/master/developers/guides/concepts/list-of-operations.html#create-account"><code>create_account</code> operation</a>) from our account to another account.</p>
<p>We use the <code>create_account</code> operation because we are sending payment to a new, unfunded account. If we were sending payment to an account that is already funded, we would use the <a href="https://github.com/stellar/go/blob/master/developers/guides/concepts/list-of-operations.html#payment"><code>payment</code> operation</a>.</p>
<p>First, let&#x2019;s check our account sequence number so we can create a payment transaction. To do this we send a request to horizon:</p>
<pre><code class="language-bash">$ curl &quot;https://horizon-testnet.stellar.org/accounts/GB7JFK56QXQ4DVJRNPDBXABNG3IVKIXWWJJRJICHRU22Z5R5PI65GAK3&quot;
</code></pre>
<p>Sequence number can be found under the <code>sequence</code> field. The current sequence number is <code>713226564141056</code>. Save this value somewhere.</p>
<p>Now, create <code>make_payment.js</code> file and paste the following code into it:</p>
<pre><code class="language-js">var StellarBase = require(&quot;stellar-base&quot;);
StellarBase.Network.useTestNetwork();

var keypair = StellarBase.Keypair.fromSecret(&apos;SCU36VV2OYTUMDSSU4EIVX4UUHY3XC7N44VL4IJ26IOG6HVNC7DY5UJO&apos;);
var account = new StellarBase.Account(keypair.publicKey(), &quot;713226564141056&quot;);

var amount = &quot;100&quot;;
var transaction = new StellarBase.TransactionBuilder(account)
  .addOperation(StellarBase.Operation.createAccount({
    destination: StellarBase.Keypair.random().publicKey(),
    startingBalance: amount
  }))
  .build();

transaction.sign(keypair);

console.log(transaction.toEnvelope().toXDR().toString(&quot;base64&quot;));
</code></pre>
<p>After running this script you should see a signed transaction blob. To submit this transaction we send it to horizon or stellar-core. But before we do, let&#x2019;s open a new console and start our previous script by <code>node stream_payments.js</code>.</p>
<p>Now to send a transaction just use horizon:</p>
<pre><code class="language-bash">curl -H &quot;Content-Type: application/json&quot; -X POST -d &apos;{&quot;tx&quot;:&quot;AAAAAH6Sq76F4cHVMWvGG4AtNtFVIvayUxSgR401rPY9ej3TAAAD6AACiK0AAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAKc1j3y10+nI+sxuXlmFz71JS35mp/RcPCP45Gw0obdAAAAAAAAAAAAExLQAAAAAAAAAAAT16PdMAAABAsJTBC5N5B9Q/9+ZKS7qkMd/wZHWlP6uCCFLzeD+JWT60/VgGFCpzQhZmMg2k4Vg+AwKJTwko3d7Jt3Y6WhjLCg==&quot;}&apos; &quot;https://horizon-testnet.stellar.org/transactions&quot;
</code></pre>
<p>You should see a new payment in a window running <code>stream_payments.js</code> script.</p>

      <br>
      <a href="https://github.com/stellar/go/blob/master/services/horizon/internal/docs/reference/tutorials/follow-received-payments.md" class="spu-color-neutral6">Edit this doc in GitHub</a>
    </s-read-md>
    <s-read-md class="endpointRef-exampleBar spu-background-neutral2 spu-color-neutral9 js-endpointRef-exampleBar">
      <nav class="s-buttonList js-endpointRef-menu"></nav>

      <div class="endpointRef-exampleRequest spu-padTop-20 js-endpointRef-exampleRequest"></div>
      <div class="endpointRef-exampleResponse spu-padTop-20 js-endpointRef-exampleResponse"></div>
    </s-read-md>
  
  </div>
</div>
</div>

<div class="so-back spu-borderTop-1 spu-borderColor-neutral7 spu-padTB-15">
  <div class="so-chunk">
    <div class="siteFooter">
      <div class="siteFooter__list">
        <a class="siteFooter__list__item" href="https://www.stellar.org/"><span class="graphic-backArrow-9"></span>&#xA0;&#xA0;Stellar.org</a>
        <span class="siteFooter__list__sep">|</span>
        <a class="siteFooter__list__item" href="https://www.stellar.org/bug-bounty-program/">Bug &#x60AC;&#x8D4F;</a>
        <a class="siteFooter__list__item" href="/stellar-core/software/admin.html">&#x8FD0;&#x884C;&#x8282;&#x70B9;</a>
        <a class="siteFooter__list__item" href="/guides/things-to-build.html">&#x6784;&#x5EFA;&#x5E94;&#x7528;</a>
        <a class="siteFooter__list__item" href="https://github.com/stellar/">GitHub</a>
        <a class="siteFooter__list__item" href="http://slack.stellar.org/">&#x6765;&#x793E;&#x533A;&#x7545;&#x8C08;</a>
      </div>
      <div class="siteFooter__list siteFooter__list--aux">
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.stellar.org/terms-of-service/">&#x670D;&#x52A1;&#x6761;&#x6B3E;</a>
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.stellar.org/privacy-policy/">&#x9690;&#x79C1;&#x653F;&#x7B56;</a>
      </div>
    </div>
  </div>
</div>
</body>
<script src="/js/app-9b8f1b0df3650f3a8dabc0e0b08ccab9.js"></script>
<script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load("U8cLXTFMPm");
analytics.page()
}}();
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5V3WNNP');</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V3WNNP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
</html>
